# knowledge.py - 股市新手村 (V66 完整擴充版)

STOCK_TERMS = {
    "🔰 交易規則與基礎術語": {
        "T+2 交割制度": """
**【定義】**
台股實施「T+2」日交割制度。
若您在 T日 (今天) 買進股票，必須在 T+2 日 (後天) 上午 10 點前，確認銀行交割帳戶內有足夠的款項扣款。

**【實戰風險】**
若 T+2 日帳戶餘額不足，就會發生 **「違約交割」**。
這不僅會嚴重影響個人信用紀錄 (聯徵)，導致未來無法辦信用卡或貸款，嚴重者甚至面臨法律責任與賠償。
""",
        "漲跌停限制 (Limit Up/Down)": """
**【定義】**
台股每日股價漲跌幅限制為參考價的 10%。

**【判讀技巧】**
* **🔴 漲停 (Limit Up)**：買氣極強，只有買單沒有賣單。通常代表主力強勢表態，隔日容易開高，是短線強勢的象徵。
* **🟢 跌停 (Limit Down)**：賣壓極重，只有賣單沒有買單。需小心流動性風險（想賣賣不掉）。
""",
        "試撮 (Pre-market Match)": """
**【定義】**
開盤前 (08:30-09:00) 與收盤前 (13:25-13:30) 的模擬撮合階段，會顯示「試算成交價」。

**【主力陷阱】**
主力常利用試撮掛出「假單」來誤導散戶。例如掛漲停買進，吸引散戶跟單，但在 08:59:59 瞬間抽單，導致開盤不如預期。**切記：試撮價格僅供參考，勿盡信。**
""",
        "ROD / IOC / FOK": """
**【委託種類詳解】**
* **ROD (Rest of Day)**：當日有效單。一般散戶最常用，掛單後直到收盤都有效。
* **IOC (Immediate or Cancel)**：立即成交否則取消。只想買現在的價格，沒買到的部分直接取消，不留單。
* **FOK (Fill or Kill)**：全部成交否則取消。要嘛全買，要嘛一張都不買（通常是大戶使用）。
"""
    },
    "📊 進階技術指標 (Technical)": {
        "K線 (Candlestick)": """
**【定義】**
紀錄股價單日走勢的圖形。包含開盤價、收盤價、最高價、最低價。

**【實戰口訣】**
* **🔴 紅K (陽線)**：收盤 > 開盤。代表多方勝，實體越長，買氣越強。
* **🟢 綠K (陰線)**：收盤 < 開盤。代表空方勝，實體越長，賣壓越重。
* **影線**：上影線代表上方有壓力（有人在賣）；下影線代表下方有支撐（有人在接）。
""",
        "MA 移動平均線 (Moving Average)": """
**【定義】**
過去 N 天收盤價的平均值，代表市場的「平均成本」。

**【關鍵參數】**
* **5日線 (5MA / 週線)**：短線攻擊發起線。強勢股不應跌破此線。
* **20日線 (20MA / 月線)**：波段生命線。多頭趨勢的回檔支撐，跌破代表趨勢轉弱。
* **60日線 (60MA / 季線)**：中長線景氣線。大型股或存股族的重要防守點。
""",
        "成交量 (Volume)": """
**【定義】**
當日該股票成交的總張數。

**【量價關係】**
* **有量才有價**：股價上漲必須伴隨成交量放大 (價漲量增)，代表買氣真實。
* **量縮整理**：股價下跌或盤整時，成交量縮小是好事，代表賣壓減輕。
* **爆量長黑**：高檔爆出巨量且收長黑K，通常是主力出貨的訊號，應儘速離場。
""",
        "KD 隨機指標": """
**【定義】**
由 K 值與 D 值組成，數值介於 0-100，用來判斷股價強弱。

**【應用技巧】**
* **黃金交叉**：K 值由下往上穿過 D 值，視為買進訊號 (低檔 20 附近準確度高)。
* **死亡交叉**：K 值由上往下穿過 D 值，視為賣出訊號 (高檔 80 附近準確度高)。
* **高檔鈍化**：KD 長期維持在 80 以上不下來，代表趨勢極度強勢，這時不應看空，反而可能有大波段。
"""
    },
    "💰 籌碼與主力解密 (Chips)": {
        "三大法人": """
**【定義】**
市場上資金最雄厚的三種機構投資人。
* **外資**：外國機構。資金最大，偏好大型權值股 (如台積電)，操作屬波段性質。
* **投信**：國內基金公司。資金來自散戶募集，偏好中小型股，有季底作帳行情，對中小型飆股影響力大。
* **自營商**：券商自己的投資部門。操作極短線，常做避險，參考價值相對較低。
""",
        "融資融券 (Margin Trading)": """
**【定義】**
信用交易，向券商借錢或借股票。
* **融資 (借錢買股)**：散戶指標。融資餘額過高代表籌碼凌亂，主力不易拉抬，容易有多殺多風險。
* **融券 (借券賣股)**：看空指標。若融券餘額暴增但股價不跌，容易發生「軋空」行情 (主力硬拉股價強迫空頭回補)。
""",
        "籌碼集中度": """
**【定義】**
買方前 15 大券商的買超張數佔總成交量的比例。

**【判讀】**
* **集中度高**：代表籌碼流向少數特定人（主力）手中，股價易漲難跌。
* **集中度低**：代表籌碼分散在散戶手中，股價容易受市場情緒波動。
"""
    },
    "🏢 基本面與財報 (Fundamentals)": {
        "EPS (每股盈餘)": """
**【定義】**
Earnings Per Share。公司每一股賺了多少錢。
**【意義】**
是股價的長期基石。EPS 持續成長的股票，股價長線才有上漲的底氣。
""",
        "本益比 (P/E Ratio)": """
**【定義】**
股價 / EPS。代表投資人願意花多少年回本。

**【應用】**
* **< 10倍**：股價可能被低估，或是該產業正處於衰退中。
* **> 20倍**：市場給予高期待，常見於高成長科技股。
""",
        "MoM / YoY (營收成長率)": """
**【定義】**
* **MoM (Month on Month)**：月增率。跟上個月比，檢視短期動能。
* **YoY (Year on Year)**：年增率。跟去年同月比。

**【實戰】**
YoY 是最重要的指標，因為它排除了淡旺季因素。若一家公司 YoY 連續 3 個月大幅成長 (>20%)，很有可能是下一檔飆股。
"""
    },
    "🐉 股市俚語與心法": {
        "割韭菜": "**定義**：散戶反覆追高殺低，資金不斷縮水，像韭菜一樣被主力收割。",
        "抬轎": "**定義**：你在低點買進，主力或晚進場的人幫你把股價推上去，讓你獲利。",
        "洗盤": "**定義**：主力故意讓股價劇烈震盪，把信心不足的散戶嚇跑，以便在低檔收集籌碼。",
        "畢業": "**定義**：本金賠光，黯然退出股市。",
        "左側交易": "**定義**：在股價下跌時預測底部買進（越跌越買），風險較高，但成本低。",
        "右側交易": "**定義**：在股價打底完成、確認上漲趨勢後買進（追漲），成本稍高但勝率較高。"
    }
}

# --- 策略詳細說明 (與 V62 stock_app.py 邏輯同步) ---
STRATEGY_DESC = """
### 🤖 AI V62 高勝率策略邏輯解密

**1. ⚡ 強力當沖 (Power DayTrade)**
* **核心哲學**：有量、有價、有波動，才適合當沖。
* **篩選公式**：
    * `今日量 > 昨日量` (爆量攻擊)
    * `股價 > 開盤價` (紅K實體)
    * `股價 > 5日均線` (短線趨勢強)
    * `振幅 > 2%` (波動夠大才有價差賺)
* **操作建議**：嚴守紀律，收盤前必須平倉，絕不留倉過夜。

**2. 📈 穩健短線 (Steady Swing)**
* **核心哲學**：買在多頭排列的起漲點或回檔支撐點。
* **篩選公式**：
    * `5日均線 > 20日均線` (黃金交叉)
    * `股價 > 20日均線` (站穩月線)
    * `50 < RSI < 75` (動能強勁但未過熱)
* **操作建議**：沿著 5日線或 10日線操作，跌破月線停損。

**3. 🐢 長線安穩 (Safe Long)**
* **核心哲學**：價值投資，買在長線保護短線的安全區域。
* **篩選公式**：
    * `股價 > 60日均線(季線)` (多頭趨勢確認)
    * `季線乖離率` 介於 -5% 至 10% (避免追高，買在回檔整理時)
* **操作建議**：分批佈局，不看短線波動，以季線為防守點。

**4. 🏆 熱門強勢 (Hot Top 100)**
* **核心哲學**：跟隨市場人氣，強者恆強。
* **篩選公式**：
    * `成交量 > 1000 張` (過濾流動性差的殭屍股)
    * 依照 `當日漲幅` 與 `成交量` 綜合排序
* **操作建議**：適合積極型投資人，追強勢股，但需嚴設停損 (例如跌破昨日低點)。
"""
