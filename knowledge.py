# knowledge.py - 股市新手村 (V98 終極圖解+心理劇場版)

# --- 1. 名詞解釋 (保留上一版的詳細內容) ---
STOCK_TERMS = {
    "🔰 幼兒園：交易規則與基礎": {
        "T+2 交割制度": """
**【👶 這是什麼？】**
這就像你在網拍買東西，不用馬上付錢，**兩天後 (T+2)** 早上 10 點前銀行才會扣款。
* **T日**：你週一買股票。
* **T+2日**：週三早上 10 點前，你的銀行戶頭要有足夠的錢。

**【⚠️ 嚴重警告 - 違約交割】**
如果你帳戶裡的錢不夠扣（哪怕只少 1 元），就會發生「違約交割」。
* **後果 1**：你的信用破產，以後辦房貸、車貸、信用卡全部被拒絕。
* **後果 2**：券商會告你，你還得賠償違約金（最高 7%）。
* **結論**：沒錢千萬不要亂下單！
""",
        "漲跌停限制 (10%)": """
**【👶 這是什麼？】**
為了怕大家太嗨或太絕望，台股規定一天最多只能漲或跌 **10%**。
* **🔴 漲停 (Limit Up)**：最高漲到 110 元。買氣太強，老闆不賣了。
* **🟢 跌停 (Limit Down)**：最低跌到 90 元。大家恐慌大拍賣，沒人敢接。

**【💡 實戰冷知識】**
* **漲停鎖死**：如果看到漲停價還有幾千張在排隊買不到，代表明天開高機率超級大。
""",
        "試撮 (08:30~09:00)": """
**【👶 這是什麼？】**
開盤前 30 分鐘的「模擬考」。

**【💣 詐騙陷阱】**
主力超愛在這時候騙人！掛漲停給你看，讓你以為今天會噴，結果 08:59:59 瞬間抽單。
**結論**：試撮看到的價格都是「假的」，眼睛業障重，千萬別信！
"""
    },
    "📊 小學部：看懂 K 線": {
        "K 線 (紅K / 綠K)": """
**【👶 這是什麼？】**
紀錄股價一天怎麼走的畫畫。
* **🔴 紅 K**：收盤 > 開盤。代表今天**買方贏了** (多軍勝)。
* **🟢 綠 K**：收盤 < 開盤。代表今天**賣方贏了** (空軍勝)。
* **影線 (細細的那根)**：股價曾經去過，但沒站穩的地方。上影線是壓力，下影線是支撐。
""",
        "成交量 (Volume)": """
**【👶 這是什麼？】**
今天總共交易了多少張股票。**量就是「油門」**。
* **價漲量增**：踩油門往上衝，這是真的漲。
* **價漲量縮**：放開油門讓車子滑行，這叫「虛漲」，隨時會停下來。
"""
    },
    "📈 中學部：技術指標": {
        "MA 移動平均線": """
**【👶 這是什麼？】**
大家的「平均成本」。
* **5 日線**：短線衝刺線。股票噴出的時候，連 5 日線都不會碰到。
* **20 日線 (月線)**：**生命線**。跌破這條線，代表這個月買的人都賠錢，趨勢可能轉空。
""",
        "KD 指標": """
**【👶 這是什麼？】**
判斷股價是「太貴」還是「太便宜」。
* **黃金交叉**：K 線往上穿過 D 線 (買進訊號)。
* **高檔鈍化**：KD 一直卡在 80 以上。這不是太貴，這是**超級強**！不要亂賣。
"""
    },
    "💰 大學部：籌碼主力": {
        "三大法人": """
* **外資**：外國大胖子，錢最多，買權值股 (台積電)。
* **投信**：國內基金經理人，拚績效，最愛炒作中小型飆股。
* **自營商**：券商自己玩，做極短線，沒什麼參考價值。
""",
        "融資": """
**散戶指標**。融資如果一直增加，代表散戶一直借錢衝進去，這時候主力通常會倒貨給散戶，股價準備跌。
"""
    }
}

# --- 2. K線型態詳細教學 (圖解+心理劇場 V98) ---
KLINE_PATTERNS = {
    "bull": { # 多方型態 (看漲)
        "錘頭線 (Hammer)": {
            "morphology": "實體很小，**下影線超級長** (像一把鐵鎚)。",
            "psychology": "🔨 **主力神救援！**\n開盤後空軍用力下殺，大家嚇得亂賣，結果主力在低檔張開網子全部接走，還把股價硬生生推回高點。代表**低檔有強力支撐**。",
            "action": "看到這根神針，隔天如果開高，大膽進場！停損設在針尖。",
            "data": [[100, 100, 92, 99]]
        },
        "多頭吞噬 (Bullish Engulfing)": {
            "morphology": "昨天是小綠K，今天是**超大紅K**，把昨天的綠K一口吞掉。",
            "psychology": "🦈 **大白鯊吃小魚！**\n昨天空軍還洋洋得意，結果今天多軍發動總攻擊，力量大到把昨天的跌幅全部吃光還倒贏。這是**超強轉折訊號**。",
            "action": "這是強烈買訊！不要等，直接上車。",
            "data": [[100, 100, 95, 96], [95, 103, 95, 102]]
        },
        "晨星 (Morning Star)": {
            "morphology": "1.長綠K(絕望) → 2.十字星(猶豫) → 3.長紅K(希望)。",
            "psychology": "🌟 **黎明前的曙光！**\n第一天大跌大家想跳樓；第二天跌不下去了，多空在打架；第三天多軍吹起反攻號角。這是一個**結構很紮實的底部**。",
            "action": "第三根紅K確認收盤時，就是最佳買點。",
            "data": [[105, 105, 95, 96], [94, 95, 93, 94], [96, 104, 96, 103]]
        },
        "紅三兵 (Three White Soldiers)": {
            "morphology": "連續三天出現紅K棒，而且收盤一天比一天高。",
            "psychology": "💂‍♂️ **多頭大軍進攻！**\n這不是游擊隊，這是正規軍！買盤源源不絕，空軍完全被輾壓。通常代表一大波趨勢剛開始。",
            "action": "趨勢已經形成，拉回 5 日線不破就是買點。",
            "data": [[90, 93, 90, 92], [92, 95, 91, 94], [94, 98, 93, 97]]
        },
        "貫穿線 (Piercing Line)": {
            "morphology": "昨天長綠K，今天開低走高，收盤衝過昨天綠K的一半以上。",
            "psychology": "🗡️ **絕地大反攻！**\n原本以為要破底了，結果多軍突然殺出來，收復半壁江山。雖然沒有「吞噬」那麼強，但也夠讓空軍嚇出一身冷汗。",
            "action": "雖是買訊，但建議觀察一天，確認站穩再進場。",
            "data": [[100, 100, 90, 92], [90, 98, 90, 97]]
        }
    },
    "bear": { # 空方型態 (看跌)
        "流星線 (Shooting Star)": {
            "morphology": "實體很小，**上影線超級長** (像避雷針)。",
            "psychology": "⚡ **多頭被賞巴掌！**\n原本想攻高創新高，結果遇到高檔主力倒貨，被打得鼻青臉腫回來。代表**上面壓力大到衝不過去**。",
            "action": "高檔看到避雷針，快逃！小心被雷劈。",
            "data": [[100, 110, 100, 101]]
        },
        "空頭吞噬 (Bearish Engulfing)": {
            "morphology": "昨天是小紅K，今天是**超大綠K**，把昨天的紅K一口吞掉。",
            "psychology": "🌊 **海嘯來了！**\n昨天還在慶祝上漲，今天空軍直接一桶冷水潑下來，把昨天的漲幅全部跌光還倒賠。多軍信心崩潰，大家開始踩踏逃跑。",
            "action": "逃命波！不要留戀，先跑再說。",
            "data": [[100, 102, 98, 101], [102, 103, 95, 96]]
        },
        "烏雲蓋頂 (Dark Cloud Cover)": {
            "morphology": "昨天長紅K，今天開高走低，收盤跌破昨天紅K的一半。",
            "psychology": "☁️ **變天了！**\n早上還出大太陽(開高)，結果下午突然烏雲密佈(殺低)。雖然還沒跌破昨天低點，但氣氛已經轉壞了。",
            "action": "多單建議減碼，或者設好停利點。",
            "data": [[90, 98, 90, 97], [99, 100, 92, 93]]
        },
        "夜星 (Evening Star)": {
            "morphology": "1.長紅K(狂熱) → 2.十字星(迷惘) → 3.長綠K(絕望)。",
            "psychology": "🌑 **黑夜降臨！**\n股價衝高後，在高檔留下一顆孤獨的星星，隨後重挫。那顆星星上的人全部被套牢，變成沉重的賣壓。",
            "action": "頭部確立，反彈就是空點。",
            "data": [[95, 102, 95, 101], [103, 104, 102, 103], [102, 102, 92, 93]]
        },
        "黑三鴉 (Three Black Crows)": {
            "morphology": "連續三天出現綠K棒，收盤一天比一天低。",
            "psychology": "🐦‍⬛ **死神敲門！**\n主力連續三天倒貨，買盤完全潰散。這通常不是洗盤，是主力真的在出貨了。",
            "action": "別想著去接刀子，這把刀子掉下來會死人的。",
            "data": [[105, 105, 100, 102], [102, 102, 96, 98], [98, 98, 92, 94]]
        }
    }
}

# --- 3. 策略詳細說明 (AI 戰情室核心) ---
STRATEGY_DESC = """
### 🤖 AI 戰情室：四大獲利策略解密

我們不是亂槍打鳥，而是運用 **大數據與量化指標** 來篩選股票。

#### 💎 1. 超強力推薦必賺 (Super Win)
> **"這是一套嚴格的交集策略，專抓主升段飆股！"**
* **趨勢**：月線 > 季線 (多頭排列)。
* **動能**：MACD 黃金交叉 + RSI 強勢區。
* **籌碼**：成交量爆增 (主力進場)。
* **適合誰**：追求高勝率、喜歡波段大賺的投資人。

#### ⚡ 2. 強力當沖 (Day Trade)
> **"今天買，今天賣，絕不留倉過夜！"**
* **條件**：預估量 > 昨日量 1.5 倍 + 股價站上開盤價。
* **適合誰**：喜歡刺激、手腳快、嚴守紀律的當沖客。

#### 📈 3. 穩健短線 (Short Swing)
> **"買在起漲點，享受一段 3~5 天的漲幅。"**
* **條件**：站上月線 + 短均線黃金交叉。
* **適合誰**：上班族，沒空盯盤，想做一個小波段。

#### 🐢 4. 長線安穩 (Long Term)
> **"好公司遇到倒楣事，就是最好的買點。"**
* **條件**：回測季線不破 + 乖離率低。
* **適合誰**：存股族，想要安穩領股息。
"""
