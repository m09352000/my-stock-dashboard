# knowledge.py - 股市新手村 (V96 完整內容版)

# --- 1. 名詞解釋 ---
STOCK_TERMS = {
    "🔰 交易規則與基礎術語": {
        "T+2 交割制度": """
**【定義】**
台股實施「T+2」日交割制度。
若您在 T日 (今天) 買進股票，必須在 T+2 日 (後天) 上午 10 點前，確認銀行交割帳戶內有足夠的款項扣款。

**【實戰風險】**
若 T+2 日帳戶餘額不足，就會發生 **「違約交割」**。
這不僅會嚴重影響個人信用紀錄 (聯徵)，導致未來無法辦信用卡或貸款，嚴重者甚至面臨法律責任與賠償。
""",
        "漲跌停限制": """
**【定義】**
台股每日股價漲跌幅限制為參考價的 10%。

**【判讀技巧】**
* **🔴 漲停 (Limit Up)**：買氣極強，只有買單沒有賣單。通常代表主力強勢表態，隔日容易開高。
* **🟢 跌停 (Limit Down)**：賣壓極重，只有賣單沒有買單。需小心流動性風險（想賣賣不掉）。
""",
        "試撮 (Pre-market Match)": """
**【定義】**
開盤前 (08:30-09:00) 與收盤前 (13:25-13:30) 的模擬撮合階段，會顯示「試算成交價」。

**【主力陷阱】**
主力常利用試撮掛出「假單」來誤導散戶。例如掛漲停買進，吸引散戶跟單，但在 08:59:59 瞬間抽單。**切記：試撮價格僅供參考，勿盡信。**
"""
    },
    "📊 進階技術指標": {
        "K線 (Candlestick)": """
**【定義】**
紀錄股價單日走勢的圖形。包含開盤價、收盤價、最高價、最低價。

**【實戰口訣】**
* **🔴 紅K (陽線)**：收盤 > 開盤。代表多方勝。
* **🟢 綠K (陰線)**：收盤 < 開盤。代表空方勝。
""",
        "MA 移動平均線": """
**【定義】**
過去 N 天收盤價的平均值，代表市場的「平均成本」。

**【關鍵參數】**
* **5日線 (5MA)**：短線攻擊線。
* **20日線 (20MA)**：月線，波段生命線。
* **60日線 (60MA)**：季線，中長線景氣線。
""",
        "KD 隨機指標": """
**【定義】**
數值介於 0-100，用來判斷股價強弱。
* **黃金交叉**：K 值由下往上穿過 D 值 (買進)。
* **死亡交叉**：K 值由上往下穿過 D 值 (賣出)。
"""
    },
    "💰 籌碼與主力解密": {
        "三大法人": """
* **外資**：外國機構，資金大，偏好權值股。
* **投信**：國內基金，偏好中小型股，有季底作帳行情。
* **自營商**：券商投資部，操作極短線。
""",
        "融資融券": """
* **融資**：借錢買股 (散戶指標)。融資高代表籌碼亂。
* **融券**：借券賣股 (看空)。融券暴增可能發生「軋空」。
"""
    }
}

# --- 2. K線型態詳細教學 ---
KLINE_PATTERNS = {
    "bull": { # 多方型態
        "錘頭線 (Hammer)": {
            "morphology": "出現在下跌趨勢底部。實體小，下影線長 (實體2倍以上)。",
            "psychology": "低檔買盤湧入，將股價推回高點，空方力竭。",
            "action": "等待隔日紅K確認後進場，設下影線低點為停損。",
            "data": [[100, 100, 92, 99]]
        },
        "晨星 (Morning Star)": {
            "morphology": "長綠K → 跳空小星星 → 長紅K。",
            "psychology": "絕望中見底，多方強勢反攻，結構紮實。",
            "action": "第三根紅K收盤確認時買進。",
            "data": [[105, 105, 95, 96], [94, 95, 93, 94], [96, 104, 96, 103]]
        }
    },
    "bear": { # 空方型態
        "流星線 (Shooting Star)": {
            "morphology": "出現在高檔。實體小，上影線長。",
            "psychology": "多方攻擊失敗，上方賣壓沉重。",
            "action": "多單獲利了結，設上影線高點為壓力。",
            "data": [[100, 110, 100, 101]]
        },
        "夜星 (Evening Star)": {
            "morphology": "長紅K → 跳空小星星 → 長綠K。",
            "psychology": "高檔無力續攻，空方接管。",
            "action": "第三根綠K確認時離場。",
            "data": [[95, 102, 95, 101], [103, 104, 102, 103], [102, 102, 92, 93]]
        }
    }
}

# --- 3. 策略說明 ---
STRATEGY_DESC = """
### 🤖 AI 策略邏輯解密

**1. 💎 超強力推薦必賺 (Super Win)**
* **條件**：趨勢全多頭 + MACD 黃金交叉 + RSI 強勢區 + 爆量。
* **特色**：這是一套嚴格的交集策略，篩選出來的股票通常正處於主升段。

**2. ⚡ 強力當沖 (Day Trade)**
* **條件**：今日成交量 > 昨日1.5倍 + 股價 > 5日線。
* **特色**：尋找當日人氣匯集、波動大的標的。

**3. 📈 穩健短線 (Short Swing)**
* **條件**：股價站上月線 + 5日線 > 20日線 (黃金交叉)。
* **特色**：順勢交易，買在趨勢形成的初期。
"""
