# knowledge.py - 股市新手村 (V65 專業擴充版)

STOCK_TERMS = {
    "🔰 交易規則與基礎術語": {
        "T+2 交割制度": """
        **定義**：台股實施「T+2」日交割。T日買進股票，必須在 T+2 日上午 10 點前，將交割款存入銀行帳戶。
        **實戰**：若 T+2 日帳戶餘額不足，會發生「違約交割」，嚴重影響個人信用紀錄，甚至面臨法律責任。
        """,
        "漲跌停限制 (Limit Up/Down)": """
        **定義**：台股每日股價漲跌幅限制為參考價的 10%。
        **判讀**：
        * **漲停 (紅燈)**：買氣極強，只有買單沒有賣單，通常代表強勢，隔日易開高。
        * **跌停 (綠燈)**：賣壓極重，只有賣單沒有買單，需小心流動性風險。
        """,
        "試撮 (Pre-market Match)": """
        **定義**：開盤前 (08:30-09:00) 與收盤前 (13:25-13:30) 的模擬撮合。
        **陷阱**：主力常利用試撮掛出「假單」來誤導散戶（例如掛漲停但開盤前最後一秒抽單），請勿盡信試撮價格。
        """,
        "ROD / IOC / FOK": """
        **委託種類**：
        * **ROD (Rest of Day)**：當日有效單。一般散戶最常用，掛單後直到收盤都有效。
        * **IOC (Immediate or Cancel)**：立即成交否則取消。只想買現在的價格，沒買到的部分直接取消。
        * **FOK (Fill or Kill)**：全部成交否則取消。要嘛全買，要嘛一張都不買。
        """,
        "市價 vs 限價": """
        **差異**：
        * **限價單**：指定價格買賣。優點是價格可控，缺點是可能買不到。
        * **市價單**：不指定價格，優先成交。優點是成交速度快（搶漲停用），缺點是可能買在最高點。
        """
    },
    "📊 進階技術指標 (Technical)": {
        "K線 (Candlestick)": """
        **定義**：紀錄股價走勢的圖形。包含開盤價、收盤價、最高價、最低價。
        **口訣**：
        * **紅K (陽線)**：收盤 > 開盤 (漲)。實體越長，多方力道越強。
        * **綠K (陰線)**：收盤 < 開盤 (跌)。實體越長，空方賣壓越重。
        * **影線**：上影線代表壓力，下影線代表支撐。
        """,
        "MA 移動平均線 (Moving Average)": """
        **定義**：過去 N 天收盤價的平均值，代表市場的「平均成本」。
        **應用**：
        * **5日線 (5MA)**：攻擊線，短線強勢股跌破 5MA 需警戒。
        * **20日線 (20MA)**：月線 (生命線)，波段操作的重要支撐。
        * **60日線 (60MA)**：季線 (景氣線)，中長線多空分水嶺。
        """,
        "KD 隨機指標": """
        **定義**：由 K 值與 D 值組成，數值介於 0-100。
        **實戰**：
        * **黃金交叉**：K 值由下往上穿過 D 值，視為買進訊號 (低檔 20 附近準確度高)。
        * **死亡交叉**：K 值由上往下穿過 D 值，視為賣出訊號 (高檔 80 附近準確度高)。
        * **高檔鈍化**：KD 長期維持在 80 以上，代表趨勢極強，不宜輕易放空。
        """,
        "MACD 指數平滑異同移動平均線": """
        **定義**：中長線趨勢指標，比 KD 慢但更穩定。
        **組成**：DIF (快線)、MACD (慢線)、OSC (柱狀體)。
        **判讀**：
        * **零軸之上**：多頭市場，回檔不破零軸可視為買點。
        * **柱狀體翻紅**：空轉多，起漲訊號。
        * **柱狀體翻綠**：多轉空，修正訊號。
        """,
        "布林通道 (Bollinger Bands)": """
        **定義**：利用標準差原理設計的帶狀指標。
        **組成**：上軌 (壓力)、中軌 (20MA)、下軌 (支撐)。
        **應用**：
        * **開口喇叭**：上下軌同時張開，代表變盤（大漲或大跌）的開始。
        * **壓縮盤整**：通道變窄，代表能量正在累積，等待突破。
        """,
        "乖離率 (BIAS)": """
        **定義**：股價與移動平均線的距離百分比。
        **公式**：(股價 - 均線) / 均線。
        **實戰**：
        * **正乖離過大**：漲太多了，容易獲利回吐 (例如 5日乖離 > 10%)。
        * **負乖離過大**：跌太深了，容易反彈 (例如 5日乖離 < -10%)。
        """
    },
    "💰 籌碼與主力解密 (Chips)": {
        "三大法人": """
        **定義**：市場上資金最雄厚的三種機構。
        * **外資**：外國機構投資人。資金最大，偏好大型權值股，操作屬波段性質。
        * **投信**：國內證券投資信託公司。資金來自基金，偏好中小型股，有季底作帳行情。
        * **自營商**：券商自己的投資部門。操作極短線，常做避險，參考價值較低。
        """,
        "融資融券 (Margin Trading)": """
        **定義**：信用交易，向券商借錢或借股票。
        * **融資 (借錢買股)**：散戶指標。融資餘額過高代表籌碼凌亂，主力不易拉抬。
        * **融券 (借券賣股)**：看空。若融券餘額暴增但股價不跌，容易發生「軋空」行情。
        """,
        "主力 / 大戶": """
        **定義**：對股價擁有控制權的投資者。包含外資、公司派、市場大戶。
        **特徵**：主力進場時通常伴隨「大單敲進」或「籌碼集中度上升」。跟著主力買，勝率較高。
        """,
        "分點券商 (Broker Branch)": """
        **定義**：每一筆交易在哪個券商分行成交的紀錄。
        **應用**：
        * **地緣券商**：公司附近的券商分點，常是公司派（內部人）進出的據點。
        * **隔日沖分點**：某些知名分點（如虎尾幫、嘉義幫）習慣今天買、明天全部賣出，容易造成隔日賣壓。
        """
    },
    "🏢 基本面與財報 (Fundamentals)": {
        "EPS (每股盈餘)": """
        **定義**：Earnings Per Share。公司每一股賺了多少錢。
        **意義**：股價的長期基石。EPS 成長的股票，股價才有上漲的底氣。
        """,
        "本益比 (P/E Ratio)": """
        **定義**：股價 / EPS。代表投資人願意花多少年回本。
        **應用**：
        * **低本益比 (<10)**：股價可能被低估，或產業衰退中。
        * **高本益比 (>20)**：市場給予高期待，常見於高成長科技股。
        """,
        "殖利率 (Dividend Yield)": """
        **定義**：現金股利 / 股價。
        **實戰**：存股族最看重指標。通常 > 5% 視為高殖利率。但要注意是否「賺了股息、賠了價差」。
        """,
        "ROE (股東權益報酬率)": """
        **定義**：巴菲特最愛的指標。代表公司拿股東的錢去投資，能創造多少報酬。
        **標準**：通常 ROE > 15% 且連續多年維持，被視為優質好公司。
        """,
        "營收 (Revenue)": """
        **定義**：公司銷售貨物或服務的總收入。
        **觀察重點**：
        * **MoM (月增率)**：跟上個月比。
        * **YoY (年增率)**：跟去年同月比（較客觀，無淡旺季影響）。YoY 連續成長是飆股的特徵。
        """
    },
    "🐉 股市俚語與心法": {
        "割韭菜": "**定義**：散戶反覆追高殺低，資金不斷縮水，像韭菜一樣被主力收割。",
        "抬轎": "**定義**：你在低點買進，主力或晚進場的人幫你把股價推上去。",
        "洗盤": "**定義**：主力故意讓股價劇烈震盪，把信心不足的散戶嚇跑，以便收集籌碼。",
        "畢業": "**定義**：本金賠光，黯然退出股市。",
        "左側交易": "**定義**：在股價下跌時預測底部買進（越跌越買），風險較高。",
        "右側交易": "**定義**：在股價打底完成、確認上漲趨勢後買進（追漲），勝率較高。"
    }
}

# --- 策略詳細說明 (與 V62 stock_app.py 邏輯同步) ---
STRATEGY_DESC = """
### 🤖 AI V62 高勝率策略邏輯解密

**1. ⚡ 強力當沖 (Power DayTrade)**
* **核心哲學**：有量、有價、有波動，才適合當沖。
* **篩選公式**：
    * `今日量 > 昨日量` (爆量攻擊)
    * `股價 > 開盤價` (紅K實體)
    * `股價 > 5日均線` (短線趨勢強)
    * `振幅 > 2%` (波動夠大才有價差賺)
* **操作建議**：嚴守紀律，收盤前必須平倉，絕不留倉過夜。

**2. 📈 穩健短線 (Steady Swing)**
* **核心哲學**：買在多頭排列的起漲點或回檔支撐點。
* **篩選公式**：
    * `5日均線 > 20日均線` (黃金交叉)
    * `股價 > 20日均線` (站穩月線)
    * `50 < RSI < 75` (動能強勁但未過熱)
* **操作建議**：沿著 5日線或 10日線操作，跌破月線停損。

**3. 🐢 長線安穩 (Safe Long)**
* **核心哲學**：價值投資，買在長線保護短線的安全區域。
* **篩選公式**：
    * `股價 > 60日均線(季線)` (多頭趨勢確認)
    * `季線乖離率` 介於 -5% 至 10% (避免追高，買在回檔整理時)
* **操作建議**：分批佈局，不看短線波動，以季線為防守點。

**4. 🏆 熱門強勢 (Hot Top 100)**
* **核心哲學**：跟隨市場人氣，強者恆強。
* **篩選公式**：
    * `成交量 > 1000 張` (過濾流動性差的殭屍股)
    * 依照 `當日漲幅` 與 `成交量` 綜合排序
* **操作建議**：適合積極型投資人，追強勢股，但需嚴設停損 (例如跌破昨日低點)。
"""
